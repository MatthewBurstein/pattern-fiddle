!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3);t.squareStates=[r.SquareState.LIGHT,r.SquareState.TRANSITION_FROM_LIGHT,r.SquareState.TRANSITION_TO_DARK,r.SquareState.DARK,r.SquareState.TRANSITION_FROM_DARK,r.SquareState.TRANSITION_TO_LIGHT],t.width=window.innerWidth,t.height=window.innerHeight,t.numberOfColumns=12,t.dimension=t.width/t.numberOfColumns,t.canvas=document.getElementById("canvas"),t.canvas.width=t.width,t.canvas.height=t.height,t.numberOfRows=Math.ceil(t.height/t.dimension)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=n(0),a={offset:0,squares:Array(i.numberOfColumns).fill(void 0).map((function(e,t){return Array(i.numberOfRows).fill(void 0).map((function(e,n){return{colorIndex:o(t,n),squareState:i.squareStates[0],locked:!1,overlayWidth:i.dimension}}))}))};function o(e,t){return e%2==0?t%2==0?0:1:t%2==0?2:3}function u(e){var t=(i.squareStates.findIndex((function(t){return t===e.squareState}))+1)%i.squareStates.length;e.squareState=i.squareStates[t],e.locked=r.isTransitionState(e)}t.getGlobalState=function(){return a},t.moveSquares=function(e){var t;!function(e){a.offset=e}((e.offset+1)%i.width),t=a.squares.map((function(e){return e.map((function(e){return r.isTransitionFromState(e)?function(e){return e.overlayWidth>0?e.overlayWidth--:u(e),e}(e):r.isTransitionToState(e)?function(e){return e.overlayWidth<i.dimension?e.overlayWidth++:u(e),e}(e):e}))})),a.squares=t},t.handleMouseMove=function(e,t){var n=function(e,t,n){var r=e-n,a=r>=0?r:r+i.width,o=Math.floor(a/i.dimension),u=Math.floor(t/i.dimension);return[o,u]}(e,t,a.offset),r=n[0],o=n[1],s=a.squares[r][o];s.locked||u(s)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3);t.isTransitionState=function(e){return[r.SquareState.TRANSITION_FROM_DARK,r.SquareState.TRANSITION_FROM_LIGHT,r.SquareState.TRANSITION_TO_LIGHT,r.SquareState.TRANSITION_TO_DARK].includes(e.squareState)},t.isTransitionFromState=function(e){return[r.SquareState.TRANSITION_FROM_DARK,r.SquareState.TRANSITION_FROM_LIGHT].includes(e.squareState)},t.isTransitionToState=function(e){return[r.SquareState.TRANSITION_TO_LIGHT,r.SquareState.TRANSITION_TO_DARK].includes(e.squareState)},t.hasLightPrimaryPalette=function(e){return[r.SquareState.LIGHT,r.SquareState.TRANSITION_FROM_LIGHT,r.SquareState.TRANSITION_TO_LIGHT].includes(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.LIGHT="light",e.TRANSITION_FROM_LIGHT="transitionFromLight",e.TRANSITION_TO_DARK="transitionToDark",e.DARK="dark",e.TRANSITION_FROM_DARK="transitionFromDark",e.TRANSITION_TO_LIGHT="transitionToLight"}(t.SquareState||(t.SquareState={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(5)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(6),a=n(1),o=n(0),u=o.width<600?20:o.width<1e3?15:10;setInterval((function(){var e=a.getGlobalState();i.paint(e),a.moveSquares(e)}),u),window.addEventListener("mousemove",(function(e){var t=e.clientX,n=e.clientY;r.handleMouseMove(t,n)})),window.addEventListener("touchstart",(function(e){var t=e.touches[0],n=t.pageX,i=t.pageY;r.handleMouseMove(n,i)})),window.addEventListener("touchmove",(function(e){var t=e.touches[0],n=t.pageX,i=t.pageY;r.handleMouseMove(n,i)}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(0),a=n(7),o=r.canvas.getContext("2d");function u(e,t,n,r,u){o.globalAlpha=.95,o.fillStyle=function(e,t){return a.getOverlayPalette(t,e)}(r,u),o.fillRect(e,t,n,i.dimension)}function s(e,t,n,r){o.globalAlpha=1,o.fillStyle=a.getBaseColor(r),o.fillRect(e,t,n,i.dimension)}t.paint=function(e){o.clearRect(0,0,i.width,i.height);var t=e.squares,n=e.offset;return t.map((function(e,t){var r=n+t*i.dimension,a=r-(r>=i.width?i.width:0),o=a>i.width-i.dimension;return e.map((function(e,t){return o?function(e,t,n){var r=e.colorIndex,a=e.overlayWidth,o=e.squareState,c=n*i.dimension,d=i.dimension/2-a/2,l=t+d;s(t,c,i.dimension,r),u(l,c,a,r,o);var f=(i.dimension-(i.width-t))%i.width;s(0,c,f,r);var S=i.dimension-f,T=i.dimension/2-a/2,v=f>T;u(v?d-S:0,c,v?a:a-S,r,o)}(e,r,t):function(e,t,n){var r=e.colorIndex,a=e.overlayWidth,o=n*i.dimension,c=t+i.dimension/2-a/2;s(t,o,i.dimension,r),u(c,o,a,e.colorIndex,e.squareState)}(e,a,t),e}))})),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=Object.freeze(["#EAE8E3","#C9C3C1","#C2C1C9","#FFFCF2"]),a=Object.freeze(["#EAE0CC","#C9ADA1","#ADA7C9","#FFF3BB"]),o=Object.freeze(["#84775E","#7C3A2A","#492A91","#D8C158"]);t.getOverlayPalette=function(e,t){return(r.hasLightPrimaryPalette(e)?a:o)[t]},t.getBaseColor=function(e){return i[e]}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnN0YW50cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc3RhdGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NxdWFyZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHlwZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9ydW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbnZhcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29sb3JzLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwic3F1YXJlU3RhdGVzIiwiU3F1YXJlU3RhdGUiLCJMSUdIVCIsIlRSQU5TSVRJT05fRlJPTV9MSUdIVCIsIlRSQU5TSVRJT05fVE9fREFSSyIsIkRBUksiLCJUUkFOU0lUSU9OX0ZST01fREFSSyIsIlRSQU5TSVRJT05fVE9fTElHSFQiLCJ3aWR0aCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJoZWlnaHQiLCJpbm5lckhlaWdodCIsIm51bWJlck9mQ29sdW1ucyIsImRpbWVuc2lvbiIsImNhbnZhcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJudW1iZXJPZlJvd3MiLCJNYXRoIiwiY2VpbCIsImdsb2JhbFN0YXRlIiwib2Zmc2V0Iiwic3F1YXJlcyIsIkFycmF5IiwiZmlsbCIsInVuZGVmaW5lZCIsIm1hcCIsIl8iLCJ4SWR4IiwieUlkeCIsImNvbG9ySW5kZXgiLCJnZXRDb2xvckluZGV4Iiwic3F1YXJlU3RhdGUiLCJsb2NrZWQiLCJvdmVybGF5V2lkdGgiLCJtb3ZlU3F1YXJlVG9OZXh0U3RhdGUiLCJzcXVhcmUiLCJuZXdTdGF0ZUlkeCIsImZpbmRJbmRleCIsImxlbmd0aCIsImlzVHJhbnNpdGlvblN0YXRlIiwic3RhdGUiLCJuZXdTcXVhcmVzIiwidXBkYXRlT2Zmc2V0Iiwicm93IiwiaXNUcmFuc2l0aW9uRnJvbVN0YXRlIiwiZGVjcmVtZW50T3ZlcmxheVdpZHRoT3JNb3ZlU3RhdGUiLCJpc1RyYW5zaXRpb25Ub1N0YXRlIiwiaW5jcmVtZW50T3ZlcmxheVdpZHRoT3JNb3ZlU3RhdGUiLCJ4Q29vcmQiLCJ5Q29vcmQiLCJuYXR1cmFsWFBvc2l0aW9uIiwicmVhbFhQb3NpdGlvbiIsImZsb29yIiwiY29sIiwiaW5jbHVkZXMiLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwiZ2V0R2xvYmFsU3RhdGUiLCJwYWludCIsIm1vdmVTcXVhcmVzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiY2xpZW50WCIsImNsaWVudFkiLCJoYW5kbGVNb3VzZU1vdmUiLCJwYWdlWCIsInBhZ2VZIiwiY3R4IiwiZ2V0Q29udGV4dCIsInBhaW50T3ZlcmxheSIsImdsb2JhbEFscGhhIiwiZmlsbFN0eWxlIiwiZ2V0T3ZlcmxheVBhbGV0dGUiLCJnZXRPdmVybGF5Q29sb3IiLCJmaWxsUmVjdCIsInBhaW50QmFzZVNxdWFyZSIsImdldEJhc2VDb2xvciIsImNsZWFyUmVjdCIsImlzU3BsaXRDb2x1bW4iLCJuYXR1cmFsTGVmdEVkZ2VPZk92ZXJsYXkiLCJvdmVybGF5UmlnaHRYQ29vcmQiLCJsZWZ0UmVjdFdpZHRoIiwicmlnaHRSZWN0V2lkdGgiLCJkaXN0YW5jZUJldHdlZW5SZWN0RWRnZWFuZFJpZ2h0RWRnZU9mT3ZlcmxheSIsImlzRW50aXJlT3ZlcmxheU9uTGVmdFJlY3QiLCJwYWludFNwbGl0U3F1YXJlIiwicGFpbnRXaG9sZVNxdWFyZSIsImJhc2VDb2xvcnMiLCJmcmVlemUiLCJsaWdodENvbG9ycyIsImRhcmtDb2xvcnMiLCJoYXNMaWdodFByaW1hcnlQYWxldHRlIiwiaW5kZXgiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZB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RUFBT04sV0FDUE0sRUFBT0osYUFsQkR1RCxDQUFpQm5ELEVBQVFnQixFQUFldkIsR0FDckNPLFFBR0pLLEksOEVDckJULFdBRU0rQyxFQUFhL0csT0FBT2dILE9BQU8sQ0FBQyxVQUFXLFVBQVcsVUFBVyxZQUM3REMsRUFBY2pILE9BQU9nSCxPQUFPLENBQUMsVUFBVyxVQUFXLFVBQVcsWUFDOURFLEVBQWFsSCxPQUFPZ0gsT0FBTyxDQUFDLFVBQVcsVUFBVyxVQUFXLFlBTW5FLDZCQUNFekQsRUFDQUYsR0FFQSxPQUFRLEVBQUE4RCx1QkFBdUI1RCxHQUFlMEQsRUFBY0MsR0FDMUQ3RCxJQUlKLHdCQUE2QitELEdBQzNCLE9BQU9MLEVBQVdLIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA0KTtcbiIsImltcG9ydCB7IFNxdWFyZVN0YXRlIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjb25zdCBzcXVhcmVTdGF0ZXM6IFNxdWFyZVN0YXRlW10gPSBbXG4gIFNxdWFyZVN0YXRlLkxJR0hULFxuICBTcXVhcmVTdGF0ZS5UUkFOU0lUSU9OX0ZST01fTElHSFQsXG4gIFNxdWFyZVN0YXRlLlRSQU5TSVRJT05fVE9fREFSSyxcbiAgU3F1YXJlU3RhdGUuREFSSyxcbiAgU3F1YXJlU3RhdGUuVFJBTlNJVElPTl9GUk9NX0RBUkssXG4gIFNxdWFyZVN0YXRlLlRSQU5TSVRJT05fVE9fTElHSFRcbl07XG5cbmV4cG9ydCBjb25zdCB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuZXhwb3J0IGNvbnN0IGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbmV4cG9ydCBjb25zdCBudW1iZXJPZkNvbHVtbnMgPSAxMjtcblxuZXhwb3J0IGNvbnN0IGRpbWVuc2lvbiA9IHdpZHRoIC8gbnVtYmVyT2ZDb2x1bW5zO1xuXG5leHBvcnQgY29uc3QgY2FudmFzID0gPEhUTUxDYW52YXNFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKTtcbmNhbnZhcy53aWR0aCA9IHdpZHRoO1xuY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbmV4cG9ydCBjb25zdCBudW1iZXJPZlJvd3MgPSBNYXRoLmNlaWwoaGVpZ2h0IC8gZGltZW5zaW9uKTtcbiIsImltcG9ydCB7IFN0YXRlLCBTcXVhcmUgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7XG4gIGlzVHJhbnNpdGlvbkZyb21TdGF0ZSxcbiAgaXNUcmFuc2l0aW9uVG9TdGF0ZSxcbiAgaXNUcmFuc2l0aW9uU3RhdGVcbn0gZnJvbSAnLi9zcXVhcmUnO1xuaW1wb3J0IHtcbiAgZGltZW5zaW9uLFxuICBzcXVhcmVTdGF0ZXMsXG4gIHdpZHRoLFxuICBudW1iZXJPZlJvd3MsXG4gIG51bWJlck9mQ29sdW1uc1xufSBmcm9tICcuL2NvbnN0YW50cyc7XG5cbmNvbnN0IGdsb2JhbFN0YXRlOiBTdGF0ZSA9IHtcbiAgb2Zmc2V0OiAwLFxuICBzcXVhcmVzOiBnZXRJbml0aWFsU3F1YXJlcygpXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0R2xvYmFsU3RhdGUoKTogU3RhdGUge1xuICByZXR1cm4gZ2xvYmFsU3RhdGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtb3ZlU3F1YXJlcyhzdGF0ZTogU3RhdGUpOiB2b2lkIHtcbiAgY29uc3QgeyBvZmZzZXQgfSA9IHN0YXRlO1xuICB1cGRhdGVPZmZzZXQoKG9mZnNldCArIDEpICUgd2lkdGgpO1xuICB1cGRhdGVPdmVybGF5V2lkdGhzQW5kU3F1YXJlU3RhdGVzKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVNb3VzZU1vdmUoeENvb3JkOiBudW1iZXIsIHlDb29yZDogbnVtYmVyKTogdm9pZCB7XG4gIGNvbnN0IFtyb3csIGNvbF0gPSBnZXRDdXJyZW50U3F1YXJlRnJvbUNvb3JkcyhcbiAgICB4Q29vcmQsXG4gICAgeUNvb3JkLFxuICAgIGdsb2JhbFN0YXRlLm9mZnNldFxuICApO1xuICBjb25zdCBzcXVhcmUgPSBnbG9iYWxTdGF0ZS5zcXVhcmVzW3Jvd11bY29sXTtcbiAgaWYgKCFzcXVhcmUubG9ja2VkKSB7XG4gICAgbW92ZVNxdWFyZVRvTmV4dFN0YXRlKHNxdWFyZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlT2Zmc2V0KG9mZnNldDogbnVtYmVyKTogU3RhdGUge1xuICBnbG9iYWxTdGF0ZS5vZmZzZXQgPSBvZmZzZXQ7XG4gIHJldHVybiBnbG9iYWxTdGF0ZTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlU3F1YXJlcyhuZXdTcXVhcmVzOiBTcXVhcmVbXVtdKSB7XG4gIGdsb2JhbFN0YXRlLnNxdWFyZXMgPSBuZXdTcXVhcmVzO1xuICByZXR1cm4gZ2xvYmFsU3RhdGU7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZU92ZXJsYXlXaWR0aHNBbmRTcXVhcmVTdGF0ZXMoKTogU3RhdGUge1xuICByZXR1cm4gdXBkYXRlU3F1YXJlcyhcbiAgICBnbG9iYWxTdGF0ZS5zcXVhcmVzLm1hcCgocm93OiBTcXVhcmVbXSk6IFNxdWFyZVtdID0+XG4gICAgICByb3cubWFwKFxuICAgICAgICAoc3F1YXJlOiBTcXVhcmUpOiBTcXVhcmUgPT4ge1xuICAgICAgICAgIGlmIChpc1RyYW5zaXRpb25Gcm9tU3RhdGUoc3F1YXJlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGRlY3JlbWVudE92ZXJsYXlXaWR0aE9yTW92ZVN0YXRlKHNxdWFyZSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChpc1RyYW5zaXRpb25Ub1N0YXRlKHNxdWFyZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBpbmNyZW1lbnRPdmVybGF5V2lkdGhPck1vdmVTdGF0ZShzcXVhcmUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc3F1YXJlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKVxuICAgIClcbiAgKTtcbn1cblxuZnVuY3Rpb24gZ2V0SW5pdGlhbFNxdWFyZXMoKTogU3F1YXJlW11bXSB7XG4gIGNvbnN0IG91dHB1dCA9IEFycmF5KG51bWJlck9mQ29sdW1ucylcbiAgICAuZmlsbCh1bmRlZmluZWQpXG4gICAgLm1hcCgoXywgeElkeCkgPT4ge1xuICAgICAgcmV0dXJuIEFycmF5KG51bWJlck9mUm93cylcbiAgICAgICAgLmZpbGwodW5kZWZpbmVkKVxuICAgICAgICAubWFwKChfLCB5SWR4KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbG9ySW5kZXg6IGdldENvbG9ySW5kZXgoeElkeCwgeUlkeCksXG4gICAgICAgICAgICBzcXVhcmVTdGF0ZTogc3F1YXJlU3RhdGVzWzBdLFxuICAgICAgICAgICAgbG9ja2VkOiBmYWxzZSxcbiAgICAgICAgICAgIG92ZXJsYXlXaWR0aDogZGltZW5zaW9uXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIHJldHVybiBvdXRwdXQ7XG59XG5cbmZ1bmN0aW9uIGdldENvbG9ySW5kZXgoeElkeDogbnVtYmVyLCB5SWR4OiBudW1iZXIpOiBudW1iZXIge1xuICBpZiAoeElkeCAlIDIgPT09IDApIHtcbiAgICByZXR1cm4geUlkeCAlIDIgPT09IDAgPyAwIDogMTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4geUlkeCAlIDIgPT09IDAgPyAyIDogMztcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRDdXJyZW50U3F1YXJlRnJvbUNvb3JkcyhcbiAgeENvb3JkOiBudW1iZXIsXG4gIHlDb29yZDogbnVtYmVyLFxuICBvZmZzZXQ6IG51bWJlclxuKTogW251bWJlciwgbnVtYmVyXSB7XG4gIGNvbnN0IG5hdHVyYWxYUG9zaXRpb24gPSB4Q29vcmQgLSBvZmZzZXQ7XG4gIGNvbnN0IHJlYWxYUG9zaXRpb24gPVxuICAgIG5hdHVyYWxYUG9zaXRpb24gPj0gMCA/IG5hdHVyYWxYUG9zaXRpb24gOiBuYXR1cmFsWFBvc2l0aW9uICsgd2lkdGg7XG4gIGNvbnN0IHJvdyA9IE1hdGguZmxvb3IocmVhbFhQb3NpdGlvbiAvIGRpbWVuc2lvbik7XG4gIGNvbnN0IGNvbCA9IE1hdGguZmxvb3IoeUNvb3JkIC8gZGltZW5zaW9uKTtcbiAgcmV0dXJuIFtyb3csIGNvbF07XG59XG5cbmZ1bmN0aW9uIG1vdmVTcXVhcmVUb05leHRTdGF0ZShzcXVhcmU6IFNxdWFyZSk6IHZvaWQge1xuICBjb25zdCBvbGRTdGF0ZUlkeCA9IHNxdWFyZVN0YXRlcy5maW5kSW5kZXgocyA9PiBzID09PSBzcXVhcmUuc3F1YXJlU3RhdGUpO1xuICBjb25zdCBuZXdTdGF0ZUlkeCA9IChvbGRTdGF0ZUlkeCArIDEpICUgc3F1YXJlU3RhdGVzLmxlbmd0aDtcbiAgc3F1YXJlLnNxdWFyZVN0YXRlID0gc3F1YXJlU3RhdGVzW25ld1N0YXRlSWR4XTtcbiAgc3F1YXJlLmxvY2tlZCA9IGlzVHJhbnNpdGlvblN0YXRlKHNxdWFyZSk7XG59XG5cbmZ1bmN0aW9uIGluY3JlbWVudE92ZXJsYXlXaWR0aE9yTW92ZVN0YXRlKHNxdWFyZTogU3F1YXJlKTogU3F1YXJlIHtcbiAgc3F1YXJlLm92ZXJsYXlXaWR0aCA8IGRpbWVuc2lvblxuICAgID8gc3F1YXJlLm92ZXJsYXlXaWR0aCsrXG4gICAgOiBtb3ZlU3F1YXJlVG9OZXh0U3RhdGUoc3F1YXJlKTtcbiAgcmV0dXJuIHNxdWFyZTtcbn1cbmZ1bmN0aW9uIGRlY3JlbWVudE92ZXJsYXlXaWR0aE9yTW92ZVN0YXRlKHNxdWFyZTogU3F1YXJlKTogU3F1YXJlIHtcbiAgc3F1YXJlLm92ZXJsYXlXaWR0aCA+IDBcbiAgICA/IHNxdWFyZS5vdmVybGF5V2lkdGgtLVxuICAgIDogbW92ZVNxdWFyZVRvTmV4dFN0YXRlKHNxdWFyZSk7XG4gIHJldHVybiBzcXVhcmU7XG59XG4iLCJpbXBvcnQgeyBTcXVhcmUsIFNxdWFyZVN0YXRlIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1RyYW5zaXRpb25TdGF0ZShzcXVhcmU6IFNxdWFyZSk6IGJvb2xlYW4ge1xuICByZXR1cm4gW1xuICAgIFNxdWFyZVN0YXRlLlRSQU5TSVRJT05fRlJPTV9EQVJLLFxuICAgIFNxdWFyZVN0YXRlLlRSQU5TSVRJT05fRlJPTV9MSUdIVCxcbiAgICBTcXVhcmVTdGF0ZS5UUkFOU0lUSU9OX1RPX0xJR0hULFxuICAgIFNxdWFyZVN0YXRlLlRSQU5TSVRJT05fVE9fREFSS1xuICBdLmluY2x1ZGVzKHNxdWFyZS5zcXVhcmVTdGF0ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1RyYW5zaXRpb25Gcm9tU3RhdGUoc3F1YXJlOiBTcXVhcmUpOiBib29sZWFuIHtcbiAgcmV0dXJuIFtcbiAgICBTcXVhcmVTdGF0ZS5UUkFOU0lUSU9OX0ZST01fREFSSyxcbiAgICBTcXVhcmVTdGF0ZS5UUkFOU0lUSU9OX0ZST01fTElHSFRcbiAgXS5pbmNsdWRlcyhzcXVhcmUuc3F1YXJlU3RhdGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNUcmFuc2l0aW9uVG9TdGF0ZShzcXVhcmU6IFNxdWFyZSk6IGJvb2xlYW4ge1xuICByZXR1cm4gW1xuICAgIFNxdWFyZVN0YXRlLlRSQU5TSVRJT05fVE9fTElHSFQsXG4gICAgU3F1YXJlU3RhdGUuVFJBTlNJVElPTl9UT19EQVJLXG4gIF0uaW5jbHVkZXMoc3F1YXJlLnNxdWFyZVN0YXRlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc0xpZ2h0UHJpbWFyeVBhbGV0dGUoc3F1YXJlU3RhdGU6IFNxdWFyZVN0YXRlKSB7XG4gIHJldHVybiBbXG4gICAgU3F1YXJlU3RhdGUuTElHSFQsXG4gICAgU3F1YXJlU3RhdGUuVFJBTlNJVElPTl9GUk9NX0xJR0hULFxuICAgIFNxdWFyZVN0YXRlLlRSQU5TSVRJT05fVE9fTElHSFRcbiAgXS5pbmNsdWRlcyhzcXVhcmVTdGF0ZSk7XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIFN0YXRlIHtcbiAgb2Zmc2V0OiBudW1iZXI7XG4gIHNxdWFyZXM6IFNxdWFyZVtdW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3F1YXJlIHtcbiAgY29sb3JJbmRleDogbnVtYmVyO1xuICBzcXVhcmVTdGF0ZTogU3F1YXJlU3RhdGU7XG4gIGxvY2tlZDogYm9vbGVhbjtcbiAgb3ZlcmxheVdpZHRoOiBudW1iZXI7XG59XG5cbmV4cG9ydCBlbnVtIFNxdWFyZVN0YXRlIHtcbiAgTElHSFQgPSAnbGlnaHQnLFxuICBUUkFOU0lUSU9OX0ZST01fTElHSFQgPSAndHJhbnNpdGlvbkZyb21MaWdodCcsXG4gIFRSQU5TSVRJT05fVE9fREFSSyA9ICd0cmFuc2l0aW9uVG9EYXJrJyxcbiAgREFSSyA9ICdkYXJrJyxcbiAgVFJBTlNJVElPTl9GUk9NX0RBUksgPSAndHJhbnNpdGlvbkZyb21EYXJrJyxcbiAgVFJBTlNJVElPTl9UT19MSUdIVCA9ICd0cmFuc2l0aW9uVG9MaWdodCdcbn1cbiIsImltcG9ydCAnLi9ydW4nO1xuIiwiaW1wb3J0IHsgaGFuZGxlTW91c2VNb3ZlIH0gZnJvbSAnLi9zdGF0ZSc7XG5pbXBvcnQgeyBwYWludCB9IGZyb20gJy4vY2FudmFzJztcbmltcG9ydCB7IGdldEdsb2JhbFN0YXRlLCBtb3ZlU3F1YXJlcyB9IGZyb20gJy4vc3RhdGUnO1xuaW1wb3J0IHsgd2lkdGggfSBmcm9tICcuL2NvbnN0YW50cyc7XG5cbmNvbnN0IGludGVydmFsID1cbiAgd2lkdGggPCA2MDAgPyAyMFxuICA6IHdpZHRoIDwgMTAwMCA/IDE1XG4gIDogMTA7XG5cbnNldEludGVydmFsKCgpID0+IHtcbiAgY29uc3Qgc3RhdGUgPSBnZXRHbG9iYWxTdGF0ZSgpO1xuICBwYWludChzdGF0ZSk7XG4gIG1vdmVTcXVhcmVzKHN0YXRlKTtcbn0sIGludGVydmFsKTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGV2ZW50ID0+IHtcbiAgY29uc3QgeyBjbGllbnRYLCBjbGllbnRZIH0gPSBldmVudDtcbiAgaGFuZGxlTW91c2VNb3ZlKGNsaWVudFgsIGNsaWVudFkpO1xufSk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgZXZlbnQgPT4ge1xuICBjb25zdCB7IHBhZ2VYLCBwYWdlWSB9ID0gZXZlbnQudG91Y2hlc1swXTtcbiAgaGFuZGxlTW91c2VNb3ZlKHBhZ2VYLCBwYWdlWSk7XG59KTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGV2ZW50ID0+IHtcbiAgY29uc3QgeyBwYWdlWCwgcGFnZVkgfSA9IGV2ZW50LnRvdWNoZXNbMF07XG4gIGhhbmRsZU1vdXNlTW92ZShwYWdlWCwgcGFnZVkpO1xufSk7XG4iLCJpbXBvcnQgeyBTdGF0ZSwgU3F1YXJlLCBTcXVhcmVTdGF0ZSB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgY2FudmFzIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgd2lkdGgsIGhlaWdodCwgZGltZW5zaW9uIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgZ2V0T3ZlcmxheVBhbGV0dGUsIE92ZXJsYXlDb2xvciwgZ2V0QmFzZUNvbG9yIH0gZnJvbSAnLi9jb2xvcnMnO1xuXG5jb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHBhaW50KHN0YXRlOiBTdGF0ZSk6IFN0YXRlIHtcbiAgY3R4LmNsZWFyUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgY29uc3QgeyBzcXVhcmVzLCBvZmZzZXQgfSA9IHN0YXRlO1xuICBzcXVhcmVzLm1hcCgocm93LCB4SWR4KSA9PiB7XG4gICAgY29uc3QgbmF0dXJhbFhQb3NpdGlvbiA9IG9mZnNldCArIHhJZHggKiBkaW1lbnNpb247XG4gICAgY29uc3QgcmVhbFhQb3NpdGlvbiA9XG4gICAgICBuYXR1cmFsWFBvc2l0aW9uIC0gKG5hdHVyYWxYUG9zaXRpb24gPj0gd2lkdGggPyB3aWR0aCA6IDApO1xuICAgIGNvbnN0IGlzU3BsaXRDb2x1bW4gPSByZWFsWFBvc2l0aW9uID4gd2lkdGggLSBkaW1lbnNpb247XG4gICAgcmV0dXJuIHJvdy5tYXAoKHNxdWFyZSwgeUlkeCkgPT4ge1xuICAgICAgaXNTcGxpdENvbHVtblxuICAgICAgICA/IHBhaW50U3BsaXRTcXVhcmUoc3F1YXJlLCBuYXR1cmFsWFBvc2l0aW9uLCB5SWR4KVxuICAgICAgICA6IHBhaW50V2hvbGVTcXVhcmUoc3F1YXJlLCByZWFsWFBvc2l0aW9uLCB5SWR4KTtcbiAgICAgIHJldHVybiBzcXVhcmU7XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gc3RhdGU7XG59XG5cbmZ1bmN0aW9uIHBhaW50V2hvbGVTcXVhcmUoc3F1YXJlOiBTcXVhcmUsIHJlYWxYUG9zaXRpb246IG51bWJlciwgeUlkeDogbnVtYmVyKSB7XG4gIGNvbnN0IHsgY29sb3JJbmRleCwgb3ZlcmxheVdpZHRoIH0gPSBzcXVhcmU7XG4gIGNvbnN0IHlDb29yZCA9IHlJZHggKiBkaW1lbnNpb247XG4gIGNvbnN0IHhDb29yZCA9IHJlYWxYUG9zaXRpb24gKyBkaW1lbnNpb24gLyAyIC0gb3ZlcmxheVdpZHRoIC8gMjtcblxuICBwYWludEJhc2VTcXVhcmUocmVhbFhQb3NpdGlvbiwgeUNvb3JkLCBkaW1lbnNpb24sIGNvbG9ySW5kZXgpO1xuICBwYWludE92ZXJsYXkoXG4gICAgeENvb3JkLFxuICAgIHlDb29yZCxcbiAgICBvdmVybGF5V2lkdGgsXG4gICAgc3F1YXJlLmNvbG9ySW5kZXgsXG4gICAgc3F1YXJlLnNxdWFyZVN0YXRlXG4gICk7XG59XG5cbmZ1bmN0aW9uIHBhaW50U3BsaXRTcXVhcmUoXG4gIHNxdWFyZTogU3F1YXJlLFxuICBuYXR1cmFsWFBvc2l0aW9uOiBudW1iZXIsXG4gIHlJZHg6IG51bWJlclxuKSB7XG4gIGNvbnN0IHsgY29sb3JJbmRleCwgb3ZlcmxheVdpZHRoLCBzcXVhcmVTdGF0ZSB9ID0gc3F1YXJlO1xuICBjb25zdCB5Q29vcmQgPSB5SWR4ICogZGltZW5zaW9uO1xuICBjb25zdCBuYXR1cmFsTGVmdEVkZ2VPZk92ZXJsYXkgPSBkaW1lbnNpb24gLyAyIC0gb3ZlcmxheVdpZHRoIC8gMjtcbiAgY29uc3Qgb3ZlcmxheVJpZ2h0WENvb3JkID0gbmF0dXJhbFhQb3NpdGlvbiArIG5hdHVyYWxMZWZ0RWRnZU9mT3ZlcmxheTtcbiAgLy8gcmlnaHQgc2lkZSBvZiBzY3JlZW5cbiAgcGFpbnRCYXNlU3F1YXJlKG5hdHVyYWxYUG9zaXRpb24sIHlDb29yZCwgZGltZW5zaW9uLCBjb2xvckluZGV4KTtcbiAgcGFpbnRPdmVybGF5KFxuICAgIG92ZXJsYXlSaWdodFhDb29yZCxcbiAgICB5Q29vcmQsXG4gICAgb3ZlcmxheVdpZHRoLFxuICAgIGNvbG9ySW5kZXgsXG4gICAgc3F1YXJlU3RhdGVcbiAgKTtcblxuICAvLyBsZWZ0IHNpZGUgb2Ygc2NyZWVuXG4gIGNvbnN0IGxlZnRSZWN0V2lkdGggPSAoZGltZW5zaW9uIC0gKHdpZHRoIC0gbmF0dXJhbFhQb3NpdGlvbikpICUgd2lkdGg7XG4gIHBhaW50QmFzZVNxdWFyZSgwLCB5Q29vcmQsIGxlZnRSZWN0V2lkdGgsIGNvbG9ySW5kZXgpO1xuICBjb25zdCByaWdodFJlY3RXaWR0aCA9IGRpbWVuc2lvbiAtIGxlZnRSZWN0V2lkdGg7XG4gIGNvbnN0IGRpc3RhbmNlQmV0d2VlblJlY3RFZGdlYW5kUmlnaHRFZGdlT2ZPdmVybGF5ID1cbiAgICBkaW1lbnNpb24gLyAyIC0gb3ZlcmxheVdpZHRoIC8gMjtcbiAgY29uc3QgaXNFbnRpcmVPdmVybGF5T25MZWZ0UmVjdCA9XG4gICAgbGVmdFJlY3RXaWR0aCA+IGRpc3RhbmNlQmV0d2VlblJlY3RFZGdlYW5kUmlnaHRFZGdlT2ZPdmVybGF5O1xuICBjb25zdCBvdmVybGF5TGVmdFhDb29yZCA9IGlzRW50aXJlT3ZlcmxheU9uTGVmdFJlY3RcbiAgICA/IG5hdHVyYWxMZWZ0RWRnZU9mT3ZlcmxheSAtIHJpZ2h0UmVjdFdpZHRoXG4gICAgOiAwO1xuICBjb25zdCBvdmVybGF5TGVmdHdpZHRoID0gaXNFbnRpcmVPdmVybGF5T25MZWZ0UmVjdFxuICAgID8gb3ZlcmxheVdpZHRoXG4gICAgOiBvdmVybGF5V2lkdGggLSByaWdodFJlY3RXaWR0aDtcbiAgcGFpbnRPdmVybGF5KFxuICAgIG92ZXJsYXlMZWZ0WENvb3JkLFxuICAgIHlDb29yZCxcbiAgICBvdmVybGF5TGVmdHdpZHRoLFxuICAgIGNvbG9ySW5kZXgsXG4gICAgc3F1YXJlU3RhdGVcbiAgKTtcbn1cblxuZnVuY3Rpb24gcGFpbnRPdmVybGF5KFxuICB4Q29vcmQ6IG51bWJlcixcbiAgeUNvb3JkOiBudW1iZXIsXG4gIHdpZHRoOiBudW1iZXIsXG4gIGNvbG9ySW5kZXg6IG51bWJlcixcbiAgc3F1YXJlU3RhdGU6IFNxdWFyZVN0YXRlXG4pIHtcbiAgY3R4Lmdsb2JhbEFscGhhID0gMC45NTtcbiAgY3R4LmZpbGxTdHlsZSA9IGdldE92ZXJsYXlDb2xvcihjb2xvckluZGV4LCBzcXVhcmVTdGF0ZSk7XG4gIGN0eC5maWxsUmVjdCh4Q29vcmQsIHlDb29yZCwgd2lkdGgsIGRpbWVuc2lvbik7XG59XG5cbmZ1bmN0aW9uIHBhaW50QmFzZVNxdWFyZShcbiAgeENvb3JkOiBudW1iZXIsXG4gIHlDb29yZDogbnVtYmVyLFxuICB3aWR0aDogbnVtYmVyLFxuICBjb2xvckluZGV4OiBudW1iZXJcbikge1xuICBjdHguZ2xvYmFsQWxwaGEgPSAxO1xuICBjdHguZmlsbFN0eWxlID0gZ2V0QmFzZUNvbG9yKGNvbG9ySW5kZXgpO1xuICBjdHguZmlsbFJlY3QoeENvb3JkLCB5Q29vcmQsIHdpZHRoLCBkaW1lbnNpb24pO1xufVxuXG5mdW5jdGlvbiBnZXRPdmVybGF5Q29sb3IoXG4gIGNvbG9ySW5kZXg6IG51bWJlcixcbiAgc3F1YXJlU3RhdGU6IFNxdWFyZVN0YXRlXG4pOiBPdmVybGF5Q29sb3Ige1xuICByZXR1cm4gZ2V0T3ZlcmxheVBhbGV0dGUoc3F1YXJlU3RhdGUsIGNvbG9ySW5kZXgpO1xufVxuIiwiaW1wb3J0IHsgU3F1YXJlU3RhdGUgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGhhc0xpZ2h0UHJpbWFyeVBhbGV0dGUgfSBmcm9tICcuL3NxdWFyZSc7XG5cbmNvbnN0IGJhc2VDb2xvcnMgPSBPYmplY3QuZnJlZXplKFsnI0VBRThFMycsICcjQzlDM0MxJywgJyNDMkMxQzknLCAnI0ZGRkNGMiddKTtcbmNvbnN0IGxpZ2h0Q29sb3JzID0gT2JqZWN0LmZyZWV6ZShbJyNFQUUwQ0MnLCAnI0M5QURBMScsICcjQURBN0M5JywgJyNGRkYzQkInXSk7XG5jb25zdCBkYXJrQ29sb3JzID0gT2JqZWN0LmZyZWV6ZShbJyM4NDc3NUUnLCAnIzdDM0EyQScsICcjNDkyQTkxJywgJyNEOEMxNTgnXSk7XG5cbmV4cG9ydCB0eXBlIE92ZXJsYXlDb2xvciA9XG4gIHwgdHlwZW9mIGJhc2VDb2xvcnNbbnVtYmVyXVxuICB8IHR5cGVvZiBsaWdodENvbG9yc1tudW1iZXJdO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3ZlcmxheVBhbGV0dGUoXG4gIHNxdWFyZVN0YXRlOiBTcXVhcmVTdGF0ZSxcbiAgY29sb3JJbmRleDogbnVtYmVyXG4pIHtcbiAgcmV0dXJuIChoYXNMaWdodFByaW1hcnlQYWxldHRlKHNxdWFyZVN0YXRlKSA/IGxpZ2h0Q29sb3JzIDogZGFya0NvbG9ycylbXG4gICAgY29sb3JJbmRleFxuICBdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QmFzZUNvbG9yKGluZGV4OiBudW1iZXIpIHtcbiAgcmV0dXJuIGJhc2VDb2xvcnNbaW5kZXhdO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==